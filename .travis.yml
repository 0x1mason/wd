language: node_js
node_js:
  - 0.8
env:
  - [
      {secure: "X3VNJyxnIMeUOB69+wc/mTL7MsvpDJBzeiAtAdemJqcF/TEH+DXu5SwkF5ID\nbe8h7hJu4B3HFG1xMXpkw/ThzL6ihPF693ajzLUKD75y3FZhjC6U2mF8/ljJ\nR3wHBywGt2kt/dNaq2tIsH1fnXzGu5EfXDjWtAexC3ECuxdvN5k="},
      {secure: "BaKOBk/AIegTkF/vUcTyPs/5Jh4ccTXZkbUxXw/ihvMC2GexuYh9kR785Ah3\nnNt7LbH4VwNlrnwz347JuF9BIhoXdqIKahr4Inw4hncpgKTA1CmBNZa5ntnG\n3TVzb/L4hXHbHSJWGtiSgRvPQQQM8rj4S4XnJwGeijcqyvCwQy0="}
    ]
before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - "./node_modules/.bin/install_selenium"
  - "sleep 5"
  - "./node_modules/.bin/start_selenium > /dev/null 2>&1 &"
script:
  - "make test_unit"
  - "make test_saucelabs"
  - "sleep 10"
  - "make test_local"
after_script:
  - "./node_modules/.bin/kill_selenium"


